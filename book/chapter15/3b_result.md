## Работа с результатами выполнения модуля

До сих пор мы только отправляли команды на устройства и никак не работали с результатом.
Как минимум, нам нужно знать как посмотреть на вывод команды.

В этом разделе мы посмотрим на то, как можно получать результаты выполнения команды, отображать их, использовать в следующих действиях.

Примеры будут использовать модуль raw.
Но аналогичные принципы будут работать и с другими модулями.

### verbose

Мы уже видели один из способов показать результат выполнения модуля - флаг verbose.

Конечно, вывод не особо удобно читать, но, как минимум, мы видим, что команды выполнились.
Также этот флаг позволяет подробно посмотреть какие шаги выполняет Ansible.

Пример запуска playbook с флагом verbose (вывод сокращен):
```
ansible-playbook 1_show_commands_with_raw.yml -v
...
TASK [run sh vlan] *************************************************************
changed: [192.168.100.100] => {"changed": true, "rc": 0, "stderr": "Shared connection to 192.168.100.100 closed.\r\n", "stdout": "\r\n\r\nVLAN Name                             Status    Ports\r\n---- -------------------------------- --------- -------------------------------\r\n1    default                          active    Et0/0, Et0/1, Et0/2, Et0/3\r\n                                                Et1/1, Et1/2, Et1/3, Et2/0\r\n                                                Et2/1, Et2/2, Et2/3, Et3/0\r\n                                                Et3/1, Et3/2, Et3/3\r\n2    VLAN0002                         active    \r\n1002 fddi-default                     act/unsup \r\n1003 token-ring-default               act/unsup \r\n1004 fddinet-default                  act/unsup \r\n1005 trnet-default                    act/unsup \r\n\r\nVLAN Type  SAID       MTU   Parent RingNo BridgeNo Stp  BrdgMode Trans1 Trans2\r\n---- ----- ---------- ----- ------ ------ -------- ---- -------- ------ ------\r\n1    enet  100001     1500  -      -      -        -    -        0      0   \r\n2    enet  100002     1500  -      -      -        -    -        0      0   \r\n1002 fddi  101002     1500  -      -      -        -    -        0      0   \r\n1003 tr    101003     1500  -      -      -        -    -        0      0   \r\n1004 fdnet 101004     1500  -      -      -        ieee -        0      0   \r\n1005 trnet 101005     1500  -      -      -        ibm  -        0      0   \r\n\r\nPrimary Secondary Type              Ports\r\n------- --------- ----------------- ------------------------------------------\r\n", "stdout_lines": ["", "", "VLAN Name                             Status    Ports", "---- -------------------------------- --------- -------------------------------", "1    default                          active    Et0/0, Et0/1, Et0/2, Et0/3", "                                                Et1/1, Et1/2, Et1/3, Et2/0", "                                                Et2/1, Et2/2, Et2/3, Et3/0", "                                                Et3/1, Et3/2, Et3/3", "2    VLAN0002                         active    ", "1002 fddi-default                     act/unsup ", "1003 token-ring-default               act/unsup ", "1004 fddinet-default                  act/unsup ", "1005 trnet-default                    act/unsup ", "", "VLAN Type  SAID       MTU   Parent RingNo BridgeNo Stp  BrdgMode Trans1 Trans2", "---- ----- ---------- ----- ------ ------ -------- ---- -------- ------ ------", "1    enet  100001     1500  -      -      -        -    -        0      0   ", "2    enet  100002     1500  -      -      -        -    -        0      0   ", "1002 fddi  101002     1500  -      -      -        -    -        0      0   ", "1003 tr    101003     1500  -      -      -        -    -        0      0   ", "1004 fdnet 101004     1500  -      -      -        ieee -        0      0   ", "1005 trnet 101005     1500  -      -      -        ibm  -        0      0   ", "", "Primary Secondary Type              Ports", "------- --------- ----------------- ------------------------------------------"]}
```

При увеличении количества букв v в флаге, вывод становится более подробным.
Попробуйте вызывать этот же playbook и добавлять к флагу буквы v (5 и больше показывают одинаковый вывод).

Несмотря на то, что вывод не очень приятен для восприятия, мы видим, что в результаты выполнения задачи, мы получаем объект в формате JSON, с такими полями:
* changed - ключ, который указывает были ли внесены изменения
* rc - return code. Это поле будет появляться в выводе тех модулей, которые выполняют какие-то команды
* stderr - ошибки, при выполнении команды. Это поле будет появляться в выводе тех модулей, которые выполняют какие-то команды
* stdout - вывод команды
* stdout_lines - вывод команды разбитый построчно


### register


